(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{356:function(e,s,t){"use strict";t.r(s);var a=t(0),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("最近收了二手零件組了台伺服器主機"),t("br"),e._v("\n雖然架好幾次都知道流程了，還是寫下來給有需要的人好了")]),e._v(" "),t("h2",{attrs:{id:"系統安裝"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系統安裝"}},[e._v("#")]),e._v(" 系統安裝")]),e._v(" "),t("p",[e._v("CentOS 目前最新的版本是 8，不過我沒用過 8，所以選擇用舊版")]),e._v(" "),t("ul",[t("li",[e._v("到 "),t("a",{attrs:{href:"https://wiki.centos.org/Download",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方網站"),t("OutboundLink")],1),e._v(" 下載 iso 檔")]),e._v(" "),t("li",[e._v("用 "),t("a",{attrs:{href:"https://rufus.ie/zh_TW.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rufus"),t("OutboundLink")],1),e._v(" 製作開機 USB")]),e._v(" "),t("li",[e._v("灌系統時插 USB 3.0 會有 USB 錯誤，所以要插 USB 2.0")]),e._v(" "),t("li",[e._v("我自己是習慣選 GNOME 桌面環境以便初始設定，都弄好後再停用桌面節省資源")]),e._v(" "),t("li",[e._v("第一次登入時會需要建立 root 以外的使用者，就順便把 CSGO 伺服器的使用者建好")])]),e._v(" "),t("h2",{attrs:{id:"安裝-webmin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安裝-webmin"}},[e._v("#")]),e._v(" 安裝 Webmin")]),e._v(" "),t("p",[e._v("Webmin 是網頁系統管理工具，安裝之後遠端管理比較方便"),t("br"),e._v("\n安裝方式有很多種，我習慣用 Yum 安裝")]),e._v(" "),t("ul",[t("li",[e._v("以 root 登入")]),e._v(" "),t("li",[e._v("新增 "),t("code",[e._v("/etc/yum.repos.d/webmin.repo")]),e._v("，打上設定，可以從 "),t("a",{attrs:{href:"http://www.webmin.com/rpm.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方下載頁"),t("OutboundLink")],1),e._v(" 複製"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[Webmin]\nname=Webmin Distribution Neutral\n#baseurl=https://download.webmin.com/download/yum\nmirrorlist=https://download.webmin.com/download/yum/mirrorlist\nenabled=1\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])])]),e._v(" "),t("li",[e._v("用終端機指令取得 key"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget https://download.webmin.com/jcameron-key.asc\nrpm --import jcameron-key.asc\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])])]),e._v(" "),t("li",[e._v("用 "),t("code",[e._v("yum install webmin")]),e._v(" 安裝")]),e._v(" "),t("li",[e._v("開啟 "),t("code",[e._v("https://localhost:10000/")]),e._v("，用 root 登入")]),e._v(" "),t("li",[e._v("到 Networking 的 FirewallD 開啟 10000 的 TCP Port，就能用外部網路登入 Webmin")])]),e._v(" "),t("h2",{attrs:{id:"安裝-lgsm-與伺服器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安裝-lgsm-與伺服器"}},[e._v("#")]),e._v(" 安裝 LGSM 與伺服器")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://linuxgsm.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux Game Server Managers"),t("OutboundLink")],1),e._v(" 是在 Linux 架設遊戲伺服器的好工具")]),e._v(" "),t("ul",[t("li",[e._v("切換到 CSGO 伺服器使用者")]),e._v(" "),t("li",[e._v("安裝依賴套件"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yum install epel-release\nyum install mailx postfix curl wget tar bzip2 gzip unzip python3 binutils bc jq tmux glibc.i686 libstdc++ libstdc++.i686\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])])]),e._v(" "),t("li",[e._v("下載 LGSM"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget -O linuxgsm.sh https://linuxgsm.sh && chmod +x linuxgsm.sh && bash linuxgsm.sh csgoserver\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[e._v("安裝伺服器"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./csgoserver install\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])])]),e._v(" "),t("h2",{attrs:{id:"伺服器設定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#伺服器設定"}},[e._v("#")]),e._v(" 伺服器設定")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://steamcommunity.com/dev/managegameservers",target:"_blank",rel:"noopener noreferrer"}},[e._v("申請 GSLT"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("編輯設定檔，伺服器設定檔在 "),t("code",[e._v("家目錄/lgsm/config-lgsm/csgoserver/csgoserver.cfg")])]),e._v(" "),t("li",[e._v("安裝 "),t("a",{attrs:{href:"https://www.sourcemm.net/downloads.php?branch=stable",target:"_blank",rel:"noopener noreferrer"}},[e._v("Metamod"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("安裝 "),t("a",{attrs:{href:"https://www.sourcemod.net/downloads.php?branch=stable",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sourcemod"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("如果遊戲資料庫想要設定 MySQL 的話，可以在 Webmin 的 Un-used Modules 裡安裝 MySQL Database Server")]),e._v(" "),t("li",[e._v("如果遊戲資料庫想要設定 MySQL 的話，要安裝 zlib 才使用 Sourcemod 的 MySQL Extension"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yum install zlib.i686\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[e._v("如果 Sourcemod 出現 "),t("code",[e._v("Can’t connect to local MySQL server through socket '/tmp/mysql.sock'")]),e._v(" 的話，建立捷徑解決"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[e._v("我個人習慣用 WinSCP 登入 SFTP 上傳檔案到伺服器")])])])}),[],!1,null,null,null);s.default=r.exports}}]);